<!DOCTYPE html>
<html>
<head>
  <title>Настройки Голосового Ввода Pro</title>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      width: 350px; /* Увеличим ширину для новых настроек */
      padding: 15px;
      font-size: 14px;
      color: #333;
    }
    h4 { margin-top: 0; margin-bottom: 10px; color: #1a73e8; }
    h5 { margin-top: 15px; margin-bottom: 8px; color: #444; border-bottom: 1px solid #eee; padding-bottom: 4px;}
    label { display: flex; align-items: center; margin-bottom: 10px; cursor: pointer; }
    input[type="checkbox"] { margin-right: 8px; width: 16px; height: 16px; accent-color: #4CAF50; }
    input[type="text"],
    input[type="password"], /* Для API ключа, чтобы маскировать ввод */
    select,
    textarea {
      margin-left: auto;
      padding: 6px 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
      flex-grow: 1;
      box-sizing: border-box; /* Чтобы padding не увеличивал общую ширину */
    }
    textarea { min-height: 60px; resize: vertical; width: 100%; margin-left: 0;}
    .container { display: flex; flex-direction: column; gap: 10px; }
    .setting-group { margin-bottom: 15px; }
    .info-text { font-size: 0.85em; color: #666; margin-top: -5px; margin-bottom:10px; }
    .label-textarea { flex-direction: column; align-items: flex-start; }
    .label-textarea span { margin-bottom: 5px; }
    /* .hotkey-info была удалена, стили для нее больше не нужны */
  </style>
</head>
<body>
  <h4>Голосовой Ввод Pro - Настройки</h4>

  <div class="container">
    <!-- ОСНОВНЫЕ НАСТРОЙКИ -->
    <div class="setting-group">
      <h5>Основные</h5>
      <label>
        <input type="checkbox" id="toggleDictation"> Включить диктовку
      </label>
      <label>
        Язык распознавания:
        <select id="languageSelect">
          <option value="ru-RU">Русский</option>
          <option value="en-US">English (US)</option>
          <option value="en-GB">English (UK)</option>
          <option value="de-DE">Deutsch</option>
          <option value="fr-FR">Français</option>
          <option value="es-ES">Español</option>
          <!-- Добавьте другие языки по необходимости -->
        </select>
      </label>
      <!-- Блок с информацией о горячей клавише удален -->
    </div>

    <!-- НАСТРОЙКИ ПЕРЕВОДА -->
    <div class="setting-group">
      <h5>Перевод (через Gemini API)</h5>
      <label>
        <input type="checkbox" id="toggleTranslation"> Включить перевод
      </label>
      <label>
        Ваш Gemini API Ключ:
        <input type="password" id="geminiApiKey" placeholder="Введите ваш API ключ">
      </label>
      <p class="info-text">Ключ сохраняется локально. <a href="https://aistudio.google.com/app/apikey" target="_blank">Получить ключ</a></p>
      <label>
        Язык перевода:
        <select id="translationLanguageSelect" disabled> <!-- Изначально выключен, включается с toggleTranslation -->
          <option value="en">Английский</option>
          <option value="ru">Русский</option>
          <option value="de">Немецкий</option>
          <option value="fr">Французский</option>
          <option value="es">Испанский</option>
          <!-- Добавьте другие языки -->
        </select>
      </label>
      <label>
        Модель Gemini:
        <select id="geminiModelSelect" disabled>
          <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash (быстрая)</option>
          <option value="gemini-1.5-pro-latest">Gemini 1.5 Pro (качественная)</option>
          <option value="custom">Другая (указать ниже)</option>
        </select>
      </label>
      <label id="customModelLabel" style="display: none;">
        Своя модель Gemini:
        <input type="text" id="customGeminiModel" placeholder="например, gemini-experimental">
      </label>
    </div>

    <!-- АВТОЗАМЕНА -->
    <div class="setting-group">
      <h5>Автозамена</h5>
      <label class="label-textarea">
        <span>Правила автозамены (каждое правило на новой строке, формат: "фраза для замены" : "чем заменить"):</span>
        <textarea id="autoReplaceRules" placeholder="например:
вопросительный знак : ?
новая строка : \n"></textarea>
      </label>
      <p class="info-text">Используйте `\n` для новой строки. Регистр при поиске фразы для замены обычно игнорируется (зависит от реализации).</p>
    </div>

    <!-- ЧЕРНЫЙ СПИСОК САЙТОВ -->
    <div class="setting-group">
      <h5>Черный список сайтов</h5>
      <label class="label-textarea">
        <span>Домены (или части URL), где расширение не будет работать (каждый на новой строке):</span>
        <textarea id="blacklistSites" placeholder="например:
example.com
anothersite.org/path"></textarea>
      </label>
      <p class="info-text">Расширение не будет активироваться на страницах, URL которых содержит указанные строки.</p>
    </div>

  </div>
  <script src="popup.js"></script>
</body>
</html>