# Расширение "Голосовой Ввод Pro" для Chrome

Расширение для браузера Chrome, позволяющее вводить текст голосом в любое активное текстовое поле на веб-странице.

## Возможности

*   **Голосовой ввод**: Автоматически преобразует речь с микрофона в текст и вставляет его в поле ввода, находящееся в фокусе.
*   **Поддержка нескольких языков**: Пользователь может выбрать язык распознавания речи из списка (например, Русский, Английский, Немецкий и др.).
*   **Управление состоянием**: Легкое включение и выключение функции диктовки через иконку расширения.
*   **Визуальная индикация**:
    *   Иконка расширения меняет свой вид в зависимости от того, включена или выключена функция.
    *   Активное поле ввода подсвечивается рамкой во время записи речи.
*   **Сохранение настроек**: Выбранный язык и состояние (включено/выключено) сохраняются между сессиями браузера.

## Установка

### Для разработчиков (установка из исходного кода):

1.  Клонируйте этот репозиторий или скачайте ZIP-архив с кодом и распакуйте его.
    ```bash
    git clone [URL_ВАШЕГО_РЕПОЗИТОРИЯ] speech-input-extension
    cd speech-input-extension
    ```
2.  Откройте браузер Chrome и перейдите на страницу `chrome://extensions`.
3.  Включите "Режим разработчика" (Developer mode) в правом верхнем углу.
4.  Нажмите кнопку "Загрузить распакованное расширение" (Load unpacked).
5.  Выберите папку с кодом расширения (например, `speech-input-extension`).
6.  Расширение будет установлено и готово к использованию. Иконка появится на панели расширений Chrome.

### Для пользователей (после публикации в Chrome Web Store):

*   [Ссылка на страницу расширения в Chrome Web Store - будет добавлена после публикации]

## Использование

1.  **Включение/Выключение**:
    *   Нажмите на иконку расширения "Голосовой Ввод Pro" на панели инструментов Chrome.
    *   Во всплывающем окне установите или снимите галочку "Включить диктовку".
    *   Иконка расширения изменит свой вид, показывая текущее состояние.

2.  **Выбор языка**:
    *   Во всплывающем окне расширения выберите желаемый язык из выпадающего списка "Язык:".
    *   Выбор сохранится автоматически.

3.  **Голосовой ввод текста**:
    *   Убедитесь, что функция диктовки включена.
    *   Кликните на любое текстовое поле на веб-странице (например, поле поиска, текстовый редактор, поле для комментария).
    *   При первой активации на сайте браузер запросит разрешение на использование микрофона. Нажмите "Разрешить".
    *   Начните говорить. Ваша речь будет автоматически преобразовываться в текст и вставляться в активное поле.
    *   Во время активной записи поле ввода будет подсвечено рамкой.
    *   Для прекращения ввода уберите фокус с поля ввода или выключите диктовку через иконку расширения.

## Структура проекта

*   `manifest.json`: Основной конфигурационный файл расширения.
*   `background.js`: Service Worker для фоновых задач (управление состоянием иконки, инициализация настроек).
*   `content.js`: Скрипт, внедряемый на веб-страницы для отслеживания фокуса, управления распознаванием речи и вставки текста.
*   `popup/`: Папка с файлами для всплывающего окна настроек.
    *   `popup.html`: HTML-структура всплывающего окна.
    *   `popup.js`: JavaScript-логика для всплывающего окна (управление настройками, взаимодействие с другими частями расширения).
*   `icons/`: Папка с иконками расширения для различных состояний и размеров.

## Возможные проблемы и их решения

*   **Голосовой ввод не работает**:
    1.  Убедитесь, что вы дали разрешение на использование микрофона для текущего сайта (проверьте настройки сайта, кликнув на иконку замка в адресной строке).
    2.  Проверьте, включена ли функция диктовки в настройках расширения.
    3.  Проверьте, выбран ли правильный язык распознавания.
    4.  Убедитесь, что ваш микрофон подключен, включен и корректно настроен в операционной системе.
    5.  Попробуйте перезагрузить страницу или браузер.
*   **Ошибка "Could not establish connection. Receiving end does not exist." в консоли `popup.js`**:
    *   Эта ошибка может появляться, если всплывающее окно открывается на страницах, где контент-скрипт не может быть внедрен (например, `chrome://extensions`) или еще не успел загрузиться. Обычно это не влияет на основную работу расширения, так как состояние синхронизируется через хранилище.